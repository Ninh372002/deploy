(function(){"use strict";var e={9210:function(e,t,a){var l=a(3751),n=a(641);const o={id:"app"},i={class:"content"};function s(e,t,a,l,s,r){const c=(0,n.g2)("SidebarMenu"),d=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",o,[(0,n.bF)(c,{isOpen:s.isSidebarOpen,onClose:r.toggleSidebar},null,8,["isOpen","onClose"]),(0,n.Lk)("div",i,[(0,n.bF)(d)])])}var r=a(33);const c=e=>((0,n.Qi)("data-v-5f9c091e"),e=e(),(0,n.jt)(),e),d={class:"logo-container"},u=c((()=>(0,n.Lk)("img",{src:"logo.png",width:"70",height:"70"},null,-1)));function p(e,t,a,l,o,i){const s=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",{class:(0,r.C4)(["sidebar",{open:a.isOpen}])},[(0,n.Lk)("div",d,[(0,n.bF)(s,{to:"/"},{default:(0,n.k6)((()=>[u])),_:1})]),(0,n.Lk)("ul",null,[(0,n.Lk)("li",null,[(0,n.bF)(s,{to:"/"},{default:(0,n.k6)((()=>[(0,n.eW)("Home")])),_:1})]),(0,n.Lk)("li",null,[(0,n.bF)(s,{to:"/HOG"},{default:(0,n.k6)((()=>[(0,n.eW)("HOG")])),_:1})]),(0,n.Lk)("li",null,[(0,n.bF)(s,{to:"/Watershed"},{default:(0,n.k6)((()=>[(0,n.eW)("Watershed")])),_:1})]),(0,n.Lk)("li",null,[(0,n.bF)(s,{to:"/predict"},{default:(0,n.k6)((()=>[(0,n.eW)("Predict")])),_:1})])])],2)}var m={name:"SidebarMenu",props:{isOpen:{type:Boolean,required:!0}}},g=a(6262);const h=(0,g.A)(m,[["render",p],["__scopeId","data-v-5f9c091e"]]);var v=h,y={name:"App",components:{SidebarMenu:v},data(){return{isSidebarOpen:!0}},methods:{toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}}};const f=(0,g.A)(y,[["render",s]]);var k=f,b=a(5220),L=(a(4114),a(953));const C={class:"common-table"},w=["onClick"];var x={__name:"CommonTable",props:{columns:{type:Array,required:!0,validator:e=>e.every((e=>"key"in e&&"label"in e))},data:{type:Array,required:!0}},emits:["button-click"],setup(e,{emit:t}){const a=t,l=(e,t)=>{a("button-click",{row:e,key:t})};return(t,a)=>((0,n.uX)(),(0,n.CE)("div",C,[(0,n.Lk)("table",null,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.columns,(e=>((0,n.uX)(),(0,n.CE)("th",{key:e.key},(0,r.v_)(e.label),1)))),128))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.data,((t,a)=>((0,n.uX)(),(0,n.CE)("tr",{key:a},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.columns,(e=>((0,n.uX)(),(0,n.CE)("td",{key:e.key},["button"===e.type?((0,n.uX)(),(0,n.CE)("button",{key:0,class:"bg-red-500 text-white hover:bg-red-700 focus:ring-sky-300 hover:scale-105 text-sm px-3 py-1 rounded-full shadow-md focus:outline-none focus:ring-2 transition duration-300 ease-in-out transform",onClick:()=>l(t,e.key)},(0,r.v_)(e.buttonText),9,w)):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.eW)((0,r.v_)(t[e.key]),1)],64))])))),128))])))),128))])])]))}};const _=(0,g.A)(x,[["__scopeId","data-v-49436b3e"]]);var O=_;const I={class:"text-white text-3xl p-3 mb-5 bg-primary"};var P={__name:"HeaderComp",props:{title:{type:String,required:!0}},setup(e){return(t,a)=>((0,n.uX)(),(0,n.CE)("header",I,[(0,n.Lk)("div",null,(0,r.v_)(e.title),1)]))}};const E=P;var X=E,A={__name:"FileUpload",props:{modelValue:File},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,l=t,o=(0,L.KR)(a.modelValue);(0,n.wB)(o,(e=>{l("update:modelValue",e)}));const i=e=>{o.value=e.target.files[0]};return(e,t)=>((0,n.uX)(),(0,n.CE)("input",{type:"file",onChange:i,accept:".zip, .rar",class:""},null,32))}};const S=(0,g.A)(A,[["__scopeId","data-v-df7f747a"]]);var T=S;const W={class:"common-input w-full"},F=["for"],V=["id","type","placeholder"];var j={__name:"CommonInput",props:{modelValue:{type:String,default:""},type:{type:String,default:"text"},placeholder:{type:String,default:""},label:{type:String,default:""},id:{type:String,default:""}},setup(e){const t=e,a=(0,L.KR)(t.modelValue);return(t,o)=>((0,n.uX)(),(0,n.CE)("div",W,[e.label?((0,n.uX)(),(0,n.CE)("label",{key:0,for:e.id,class:"block text-sm font-medium text-gray-700"},(0,r.v_)(e.label),9,F)):(0,n.Q3)("",!0),(0,n.bo)((0,n.Lk)("input",{id:e.id,type:e.type,placeholder:e.placeholder,"onUpdate:modelValue":o[0]||(o[0]=e=>a.value=e),onInput:o[1]||(o[1]=e=>t.$emit("update:modelValue",a.value)),class:"mt-1 px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200"},null,40,V),[[l.hp,a.value]])]))}};const M=(0,g.A)(j,[["__scopeId","data-v-64ef884f"]]);var R=M;const U={class:"spinner__content"},H={id:"loading-bar-spinner",class:"spinner"};function K(e,t,a,l,o,i){return(0,n.uX)(),(0,n.CE)("div",U,[(0,n.Lk)("div",H,[(0,n.Lk)("div",{class:(0,r.C4)(["spinner-icon",a.size]),style:(0,r.Tr)({borderColor:a.colorProp})},null,6)])])}var Q={name:"SpinnerLoading",props:{show:{type:Boolean,default:!1},colorProp:{type:String,default:"lightgreen"},size:{type:String,default:"normal"}}};const z=(0,g.A)(Q,[["render",K],["__scopeId","data-v-1966985a"]]);var D=z;const N=["type","disabled"],B={key:1};var G={__name:"CommonButton",props:{name:{type:String},isLoading:{type:Boolean},type:{type:String,default:"button"},disabled:{type:Boolean,default:!1},customClasses:{type:String,default:""}},emits:["click"],setup(e,{emit:t}){const a=e,l=t,o=e=>{a.disabled||l("click",e)};return(t,a)=>((0,n.uX)(),(0,n.CE)("button",{type:e.type,disabled:e.disabled,onClick:o,class:(0,r.C4)(["text-sm px-3 py-1 rounded-full shadow-md focus:outline-none focus:ring-2 transition duration-300 ease-in-out transform",{"bg-sky-500 text-white hover:bg-sky-600 focus:ring-sky-300 hover:scale-105":!e.disabled,"bg-gray-400 text-gray-700 cursor-not-allowed":e.disabled,"relative bg-sky-600/30 h-8 w-20 pl-16 pt-4":e.isLoading},e.customClasses])},[e.isLoading?((0,n.uX)(),(0,n.Wv)(D,{key:1,size:"small",colorProp:"grey"})):((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[void 0===e.name?(0,n.RG)(t.$slots,"default",{key:0}):(0,n.Q3)("",!0),void 0!==e.name?((0,n.uX)(),(0,n.CE)("span",B,(0,r.v_)(e.name),1)):(0,n.Q3)("",!0)],64))],10,N))}};const $=(0,g.A)(G,[["__scopeId","data-v-3c3b0a7c"]]);var Y=$,q=a(4335);const J=e=>((0,n.Qi)("data-v-12aeb836"),e=e(),(0,n.jt)(),e),Z={key:0,class:"fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center"},ee={class:"bg-white rounded-lg px-6 pt-6 max-w-sm w-full"},te=J((()=>(0,n.Lk)("h2",{class:"text-xl font-bold"},"Create New Model",-1))),ae={class:"mb-4"},le={class:"file-upload flex items-center mt-5 item"},ne={class:"flex justify-center mt-3"};var oe={__name:"CreateModelPopupComp",props:{isOpen:{type:Boolean,required:!0}},emits:["close"],setup(e,{emit:t}){const a=t,l=(0,L.KR)(null),o=(0,L.KR)(!1),i=(0,L.KR)(!1),s=(0,L.KR)(!1),r=()=>{a("close")},c=(0,L.KR)(""),d=(0,n.EW)((()=>""===c.value.trim())),u=async()=>{const e="http://localhost:5000/api/v1.0/upload";if(o.value=!0,!l.value)return;const t=new FormData;t.append("file",l.value),t.append("modelName",c.value.trim());try{const a=await q.A.post(e,t,{headers:{"Content-Type":"multipart/form-data"}});s.value=!0,alert(a.data.message)}catch(a){console.error(a),alert(a.response.data.message)}finally{o.value=!1}},p=async()=>{const e="http://localhost:5000/api/v1.0/training";if(i.value=!0,!l.value)return;const t=new FormData;t.append("modelName",c.value.trim());try{const a=await q.A.post(e,t,{headers:{"Content-Type":"multipart/form-data"}});alert(a.data.message)}catch(a){console.error(a),alert(a.response.data.message)}finally{i.value=!1}};return(t,a)=>e.isOpen?((0,n.uX)(),(0,n.CE)("div",Z,[(0,n.Lk)("div",ee,[(0,n.Lk)("div",{class:"flex justify-between items-center mb-4"},[te,(0,n.Lk)("button",{onClick:r,class:"text-gray-700"},"×")]),(0,n.Lk)("div",ae,[(0,n.bF)(R,{label:"Model Name",placeholder:"Enter your model name",modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=e=>c.value=e)},null,8,["modelValue"]),(0,n.Lk)("div",le,[(0,n.bF)(T,{modelValue:l.value,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value=e)},null,8,["modelValue"]),(0,n.bF)(Y,{onClick:u,disabled:!l.value||d.value||s.value,name:"Upload","is-loading":o.value,customClasses:"h-8 w-28 text-xs bg-"},{default:(0,n.k6)((()=>[o.value?((0,n.uX)(),(0,n.Wv)(D,{key:0,size:"small",colorProp:"grey"})):(0,n.Q3)("",!0)])),_:1},8,["disabled","is-loading"])]),(0,n.Lk)("div",ne,[(0,n.bF)(Y,{onClick:p,disabled:!s.value,name:"Training"},{default:(0,n.k6)((()=>[i.value?((0,n.uX)(),(0,n.Wv)(D,{key:0,size:"small",colorProp:"grey"})):(0,n.Q3)("",!0)])),_:1},8,["disabled"])])])])])):(0,n.Q3)("",!0)}};const ie=(0,g.A)(oe,[["__scopeId","data-v-12aeb836"]]);var se=ie;const re={class:"flex justify-end items-center p-4"};var ce={__name:"TrainingPage",setup(e){const t=(0,L.KR)(!1),a=(0,L.KR)([{key:"model_name",label:"Model Name"},{key:"creation_time",label:"Creation Time"},{key:"action",label:"Action",type:"button",buttonText:"Delete"}]),l=(0,L.KR)();(0,n.sV)((()=>{o()}));const o=async()=>{l.value=[];const e="http://localhost:8080/api/v1.0/models";try{const t=await q.A.get(e,{headers:{"Content-Type":"application/json"}});if(t.data&&Array.isArray(t.data)){const e=t.data;for(let t=0;t<e.length;t++)l.value.push({model_name:e[t],creation_time:"2024-06-17 15:03:15"})}else console.error("Invalid response data structure")}catch(t){console.error("Error fetching model list:",t),alert("Error fetching model list. Please try again.")}},i=async({row:e})=>{const t="http://localhost:8080/api/v1.0/model";try{await q.A.delete(t,{headers:{"Content-Type":"application/json"},params:{modelName:e.model_name.trim()}}),alert("Successfully deleted model"),o()}catch(a){console.error(a),alert(a.response.data.message)}},s=()=>{t.value=!0},r=()=>{t.value=!1};return(e,o)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(X,{title:"Training Page"}),(0,n.Lk)("div",re,[(0,n.bF)(Y,{onClick:s,name:"Add New Model","custom-classes":"py-4"}),(0,n.bF)(se,{isOpen:t.value,onClose:r},null,8,["isOpen"])]),(0,n.bF)(O,{columns:a.value,data:l.value,onButtonClick:i},null,8,["columns","data"])],64))}};const de=ce;var ue=de;a(4603),a(7566),a(8721);const pe={class:"image-box"},me={class:"image-title text-white text-lg"},ge={class:"image"},he={ref:"panzoomElement"},ve=["width","height","src","alt"];function ye(e,t,a,l,o,i){return(0,n.uX)(),(0,n.CE)("div",pe,[(0,n.Lk)("div",me,[(0,n.Lk)("span",null,(0,r.v_)(a.title),1)]),(0,n.Lk)("div",ge,[(0,n.Lk)("div",he,[(0,n.Lk)("img",{style:(0,r.Tr)(i.imageStyle),width:o.imageWidth,height:o.imageHeight,src:a.source,alt:a.alt,ref:"panzoomTarget"},null,12,ve)],512)])])}var fe=a(6611),ke=a.n(fe),be={name:"ImageComp",data(){return{scale:1,imageWidth:500,imageHeight:500,minWidth:400,maxWidth:500}},mounted(){this.initPanzoom(),this.calculateCanvasSize()},props:{title:{type:String,default:""},alt:{type:String,default:""},source:{}},computed:{imageStyle(){return{transform:`scale(${this.scale})`}}},methods:{calculateCanvasSize(){const e=new Image;e.src=this.source,e.onload=()=>{const t=e.width/e.height;this.imageWidth=Math.min(Math.max(e.width,this.minWidth),this.maxWidth),this.imageHeight=Math.round(this.imageWidth/t)}},initPanzoom(){const e=this.$refs.panzoomElement,t=this.$refs.panzoomTarget,a=ke()(t,{maxZoom:10,minZoom:1});e.addEventListener("wheel",a.zoomWithWheel)}}};const Le=(0,g.A)(be,[["render",ye],["__scopeId","data-v-29150071"]]);var Ce=Le;const we=e=>((0,n.Qi)("data-v-61f31dc7"),e=e(),(0,n.jt)(),e),xe={class:"result"},_e={class:"image-box"},Oe={class:"text-white text-lg"},Ie={class:"image"},Pe={ref:"panzoomElement"},Ee=["width","height"],Xe={class:"roi-manager"},Ae=we((()=>(0,n.Lk)("div",{class:"text-center text-lg border-b-2 border-green-400"}," Points ",-1))),Se={class:"roi-points"},Te=["onClick"],We={class:"roi-extension"},Fe={class:"text-lg"},Ve={class:"flex"},je=we((()=>(0,n.Lk)("span",{class:"basis-28"},"Select All",-1))),Me=["disabled"],Re={class:"flex"},Ue=we((()=>(0,n.Lk)("span",{class:"basis-28"},"Distance Map",-1))),He=["disabled"];function Ke(e,t,a,o,i,s){return(0,n.uX)(),(0,n.CE)("div",xe,[(0,n.Lk)("div",_e,[(0,n.Lk)("div",Oe,[(0,n.Lk)("span",null,(0,r.v_)(a.title),1)]),(0,n.Lk)("div",Ie,[(0,n.Lk)("div",Pe,[(0,n.Lk)("canvas",{ref:"canvas",width:i.canvasWidth,height:i.canvasHeight},null,8,Ee)],512)])]),(0,n.Lk)("div",Xe,[Ae,(0,n.Lk)("div",Se,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(this.points,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:(0,r.C4)(["point",this.pointClicked[t]&&"bg-green"]),onClick:e=>s.handleClickPoint(t)},[(0,n.Lk)("span",null,(0,r.v_)(e[0]),1),(0,n.eW)(" - "),(0,n.Lk)("span",null,(0,r.v_)(e[1]),1)],10,Te)))),128))]),(0,n.Lk)("div",We,[(0,n.Lk)("div",Fe,[(0,n.Lk)("div",Ve,[je,(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>i.labelAll=e),disabled:i.distanceMap,onClick:t[1]||(t[1]=(...e)=>s.handleAllPoints&&s.handleAllPoints(...e))},null,8,Me),[[l.lH,i.labelAll]])]),(0,n.Lk)("div",Re,[Ue,(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=e=>i.distanceMap=e),disabled:i.labelAll,onClick:t[3]||(t[3]=(...e)=>s.handleShowDistanceMap&&s.handleShowDistanceMap(...e))},null,8,He),[[l.lH,i.distanceMap]])])])])])])}var Qe={name:"ImageRes",data(){return{scale:1,canvasWidth:500,canvasHeight:500,minWidth:400,maxWidth:500,pointClicked:[],prevPoint:-1,curPoint:-1,scaleX:1,scaleY:1,labelAll:!1,distanceMap:!1}},watch:{source(){this.drawImageOnCanvas()}},mounted(){this.initPanzoom(),this.calculateCanvasSize(),this.drawImageOnCanvas()},props:{title:{type:String,default:""},alt:{type:String,default:""},source:{},coordArray:{type:Array,default:[]},points:{type:Array,default:[]},strokeLine:{type:String,default:"#000000"}},methods:{drawBoundary(e,t){e.beginPath(),e.strokeStyle=this.strokeLine,e.lineWidth=2,e.moveTo(t[1][0]*this.scaleX,t[0][0]*this.scaleY);for(let a=1;a<t[0].length;a++)e.lineTo(t[1][a]*this.scaleX,t[0][a]*this.scaleY);e.closePath(),e.stroke()},drawDistaceMap(e,t,a){e.lineWidth=.5,e.strokeStyle="black";for(let l=0;l<t.length;l++){for(let n=0;n<a[0][0].length;n++)e.beginPath(),e.moveTo(t[l][1]*this.scaleX,t[l][0]*this.scaleY),e.lineTo(a[l][1][n]*this.scaleX,a[l][0][n]*this.scaleY),e.stroke();e.strokeStyle="black",e.lineWidth=.5,e.stroke()}},handleShowDistanceMap(){const e=this.$refs.canvas,t=e.getContext("2d");0==this.distanceMap?this.drawDistaceMap(t,this.points,this.coordArray):this.drawImageOnCanvas()},handleAllPoints(){const e=this.$refs.canvas,t=e.getContext("2d");if(0==this.labelAll)for(let a=0;a<this.coordArray.length;a++)this.drawBoundary(t,this.coordArray[a]),this.pointClicked[a]=1;else this.drawImageOnCanvas(),this.pointClicked=[]},handleClickPoint(e){if(this.pointClicked[e])return;-1!=this.curPoint&&(this.prevPoint=this.curPoint),this.pointClicked=[],this.pointClicked[e]=1,this.curPoint=e;const t=this.$refs.canvas,a=t.getContext("2d"),l=new Image;l.src=this.source,-1!=this.prevPoint&&a.drawImage(l,0,0,this.canvasWidth,this.canvasHeight),this.drawBoundary(a,this.coordArray[this.curPoint])},calculateCanvasSize(){const e=new Image;e.src=this.source,e.onload=()=>{const t=e.width/e.height;this.canvasWidth=Math.min(Math.max(e.width,this.minWidth),this.maxWidth),this.canvasHeight=Math.round(this.canvasWidth/t),this.scaleX=this.canvasWidth/e.width,this.scaleY=this.canvasHeight/e.height}},drawImageOnCanvas(){return new Promise((()=>{const e=this.$refs.canvas,t=e.getContext("2d"),a=new Image;a.onload=()=>{t.drawImage(a,0,0,this.canvasWidth,this.canvasHeight)},a.src=this.source}))},initPanzoom(){const e=this.$refs.panzoomElement,t=this.$refs.canvas,a=ke()(t,{maxZoom:10,minZoom:1});e.addEventListener("wheel",a.zoomWithWheel)}}};const ze=(0,g.A)(Qe,[["render",Ke],["__scopeId","data-v-61f31dc7"]]);var De=ze;const Ne=e=>((0,n.Qi)("data-v-11803265"),e=e(),(0,n.jt)(),e),Be={class:"flex flex-col"},Ge={key:0,class:"caution"},$e={class:"flex"},Ye={class:"py-3 flex pr-10"},qe=Ne((()=>(0,n.Lk)("label",{class:"text-white basis-48 pr-3",for:"modelOption"},"Type Of Model:",-1))),Je={class:"py-3 flex"},Ze=Ne((()=>(0,n.Lk)("label",{class:"text-white basis-48 pr-3",for:"colorMapOption"},"Color Map:",-1))),et=Ne((()=>(0,n.Lk)("option",{value:"plasma"},"Plasma",-1))),tt=Ne((()=>(0,n.Lk)("option",{value:"jet"},"Jet",-1))),at=Ne((()=>(0,n.Lk)("option",{value:"viridis"},"Viridis",-1))),lt=Ne((()=>(0,n.Lk)("option",{value:"random_label_cmap"},"Random Label",-1))),nt=[et,tt,at,lt],ot={class:"py-3 flex",style:{"padding-left":"30px"}},it={key:1,class:"popup"},st=Ne((()=>(0,n.Lk)("div",{class:"popup-header"},"Object Detection with Star-convex Shapes",-1))),rt={class:"section"},ct=Ne((()=>(0,n.Lk)("h2",null,"Neural Network Prediction",-1))),dt=Ne((()=>(0,n.Lk)("label",{for:"model"},"Model",-1))),ut={class:"normalize"},pt=Ne((()=>(0,n.Lk)("label",{for:"percentile-low"},"Percentile low",-1))),mt={class:"range-value"},gt=Ne((()=>(0,n.Lk)("label",{for:"percentile-high"},"Percentile high",-1))),ht={class:"range-value"},vt={class:"section"},yt=Ne((()=>(0,n.Lk)("h2",null,"NMS Postprocessing",-1))),ft=Ne((()=>(0,n.Lk)("label",{for:"probability-threshold"},"Probability/Score Threshold",-1))),kt={class:"range-value"},bt=Ne((()=>(0,n.Lk)("label",{for:"overlap-threshold"},"Overlap Threshold",-1))),Lt={class:"range-value"},Ct={class:"output-type"},wt=Ne((()=>(0,n.Lk)("h2",null,"Output Type",-1))),xt={class:"popup-buttons"},_t=["disabled"],Ot=Ne((()=>(0,n.Lk)("div",{class:"upload__message"},[(0,n.Lk)("span",null,"Click to upload file")],-1))),It={class:"flex mt-16"},Pt={class:"flex flex-col justify-center mx-5"},Et={class:"flex h-8"},Xt={key:0,class:"mr-16 text-lime-400"},At=Ne((()=>(0,n.Lk)("span",{class:"text-white mr-4"},"Duration:",-1))),St={key:1,class:"mr-16 text-lime-400"},Tt=Ne((()=>(0,n.Lk)("span",{class:"text-white mr-4"},"Objects Counted: ",-1))),Wt={class:"w-full flex justify-end"},Ft={data(){return{isPopupVisible:!1,normalizeImage:!0,percentileLow:0,percentileHigh:99.8,probabilityThreshold:.5,overlapThreshold:.4,outputType:"both",model:"versatile"}},methods:{togglePopup(){this.isPopupVisible=!this.isPopupVisible},applySettings(){this.togglePopup()}}};var Vt=Object.assign(Ft,{__name:"PredictPage",setup(e){const t=(0,L.KR)(!1),a=(0,L.KR)(!1),o=(0,L.KR)(null),i=(0,L.KR)(),s=(0,L.KR)(null),c=(0,L.KR)(!1),d=(0,L.Kh)({type:"",colorMap:"plasma",image:null,imageRes:null,duration:0,objectsCount:0,points:[],coord:[],strokeLine:"#000000"});(0,n.sV)((()=>{v()}));const u=()=>{s.value.click()},p=async e=>{t.value=!0,a.value=!0;const l=e.target.files[0];if(l)if(o.value=l,l.name.toLowerCase().includes("tiff")||l.name.toLowerCase().includes("tif")){const e=new FormData;e.append("tiff_file",l);try{const t=await q.A.post("http://localhost:5000/api/v1.0/convert",e,{headers:{"Content-Type":"multipart/form-data"},responseType:"arraybuffer"}),a=new Blob([t.data],{type:"image/png"});d.image=URL.createObjectURL(a)}catch(n){alert("Error uploading and converting the image, please try again"),console.error("Error uploading and converting the image",n)}}else{const e=new FileReader;e.readAsDataURL(l),e.onload=()=>{d.image=e.result}}t.value=!1,a.value=!1},m=async()=>{if(null!=o.value&&!a.value){const l=new FormData;l.append("image",o.value),l.append("modelName",d.type),l.append("colorMap",d.colorMap),"random_label_cmap"===d.colorMap?d.strokeLine="#FF0000":d.strokeLine="#000000",t.value=!0,a.value=!0;try{const e=performance.now(),t=await q.A.post("http://localhost:5000/api/v1.0/segmentation",l,{headers:{"Content-Type":"multipart/form-data"}});d.imageRes="data:image/png;base64,"+t.data.imageBytes,d.objectsCount=t.data.objectsCount,d.points=t.data.points,d.coord=t.data.coord,d.duration=(performance.now()-e).toFixed(2),c.value=!0}catch(e){alert("An error occur when segmenting the image, please try again!"),console.error("Error uploading and converting the image",e)}finally{t.value=!1,a.value=!1}}},g=()=>{const e=document.createElement("a");e.href=d.imageRes,e.download="mask.png",e.click()},h=()=>{d.image=null,d.imageRes=null},v=async()=>{i.value=[];const e="http://localhost:5000/api/v1.0/models";try{const t=await q.A.get(e,{headers:{"Content-Type":"application/json"}});if(t.data&&Array.isArray(t.data)){const e=t.data;for(let t=0;t<e.length;t++)i.value.push({model_name:e[t],creation_time:"2024-06-17 15:03:15"});i.value&&i.value.length>0&&(d.type=i.value[0].model_name)}else console.error("Invalid response data structure")}catch(t){console.error("Error fetching model list:",t),alert("Error fetching model list. Please try again.")}};return(e,o)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(X,{title:"Predict Page"}),(0,n.Lk)("div",Be,[d.image?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("span",Ge,"Please upload image with jpg, png or tif format and less than 10mb")),(0,n.Lk)("div",$e,[(0,n.Lk)("div",Ye,[qe,(0,n.bo)((0,n.Lk)("select",{id:"modelOption","onUpdate:modelValue":o[0]||(o[0]=e=>d.type=e)},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.value,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.name},(0,r.v_)(e.model_name),1)))),128))],512),[[l.u1,d.type]])]),(0,n.Lk)("div",Je,[Ze,(0,n.bo)((0,n.Lk)("select",{id:"colorMapOption","onUpdate:modelValue":o[1]||(o[1]=e=>d.colorMap=e)},nt,512),[[l.u1,d.colorMap]])]),(0,n.Lk)("div",ot,[(0,n.Lk)("button",{class:"btn-open",onClick:o[2]||(o[2]=(...t)=>e.togglePopup&&e.togglePopup(...t))},"Open StarDist Settings"),e.isPopupVisible?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"overlay",onClick:o[3]||(o[3]=(...t)=>e.togglePopup&&e.togglePopup(...t))})):(0,n.Q3)("",!0),e.isPopupVisible?((0,n.uX)(),(0,n.CE)("div",it,[st,(0,n.Lk)("div",rt,[ct,dt,(0,n.bo)((0,n.Lk)("select",{id:"modelOption","onUpdate:modelValue":o[4]||(o[4]=e=>d.type=e)},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.value,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.name},(0,r.v_)(e.model_name),1)))),128))],512),[[l.u1,d.type]]),(0,n.Lk)("div",ut,[(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":o[5]||(o[5]=t=>e.normalizeImage=t)},null,512),[[l.lH,e.normalizeImage]]),(0,n.eW)(" Normalize Image ")]),pt,(0,n.bo)((0,n.Lk)("input",{type:"range","onUpdate:modelValue":o[6]||(o[6]=t=>e.percentileLow=t),min:"0",max:"100",step:"1"},null,512),[[l.Jo,e.percentileLow]]),(0,n.Lk)("div",mt,(0,r.v_)(e.percentileLow)+"%",1),gt,(0,n.bo)((0,n.Lk)("input",{type:"range","onUpdate:modelValue":o[7]||(o[7]=t=>e.percentileHigh=t),min:"0",max:"100",step:"0.1"},null,512),[[l.Jo,e.percentileHigh]]),(0,n.Lk)("div",ht,(0,r.v_)(e.percentileHigh)+"%",1)])]),(0,n.Lk)("div",vt,[yt,ft,(0,n.bo)((0,n.Lk)("input",{type:"range","onUpdate:modelValue":o[8]||(o[8]=t=>e.probabilityThreshold=t),min:"0",max:"1",step:"0.01"},null,512),[[l.Jo,e.probabilityThreshold]]),(0,n.Lk)("div",kt,(0,r.v_)(e.probabilityThreshold),1),bt,(0,n.bo)((0,n.Lk)("input",{type:"range","onUpdate:modelValue":o[9]||(o[9]=t=>e.overlapThreshold=t),min:"0",max:"1",step:"0.01"},null,512),[[l.Jo,e.overlapThreshold]]),(0,n.Lk)("div",Lt,(0,r.v_)(e.overlapThreshold),1)]),(0,n.Lk)("div",Ct,[wt,(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"radio","onUpdate:modelValue":o[10]||(o[10]=t=>e.outputType=t),value:"roi-manager"},null,512),[[l.XL,e.outputType]]),(0,n.eW)(" ROI Manager")]),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"radio","onUpdate:modelValue":o[11]||(o[11]=t=>e.outputType=t),value:"label-image"},null,512),[[l.XL,e.outputType]]),(0,n.eW)(" Label Image")]),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"radio","onUpdate:modelValue":o[12]||(o[12]=t=>e.outputType=t),value:"both",checked:""},null,512),[[l.XL,e.outputType]]),(0,n.eW)(" Both")])]),(0,n.Lk)("div",xt,[(0,n.Lk)("button",{class:"btn-close",onClick:o[13]||(o[13]=(...t)=>e.togglePopup&&e.togglePopup(...t))},"Cancel"),(0,n.Lk)("button",{class:"btn-apply",onClick:o[14]||(o[14]=(...t)=>e.applySettings&&e.applySettings(...t))},"Apply")])])):(0,n.Q3)("",!0)])]),d.image?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",{key:1,class:(0,r.C4)(["upload-box",a.value&&"not-allowed"]),onClick:u},[t.value?((0,n.uX)(),(0,n.Wv)(D,{key:0})):(0,n.Q3)("",!0),(0,n.Lk)("input",{ref_key:"fileInput",ref:s,type:"file",onChange:p,accept:"image/*",style:{display:"none"},disabled:a.value},null,40,_t),Ot],2)),(0,n.Lk)("div",It,[d.image?((0,n.uX)(),(0,n.Wv)(Ce,{key:0,title:"Original Image",source:d.image,alt:"Uploaded Image"},null,8,["source"])):(0,n.Q3)("",!0),(0,n.Lk)("div",Pt,[d.image?((0,n.uX)(),(0,n.Wv)(Y,{key:0,onClick:m,name:"Segment >>","is-loading":t.value},{default:(0,n.k6)((()=>[t.value?((0,n.uX)(),(0,n.Wv)(D,{key:0,size:"small",colorProp:"grey"})):(0,n.Q3)("",!0)])),_:1},8,["is-loading"])):(0,n.Q3)("",!0)]),d.imageRes?((0,n.uX)(),(0,n.Wv)(De,{key:1,title:"Predicted Image",source:d.imageRes,alt:"Predicted Image",points:d.points,coordArray:d.coord,strokeLine:d.strokeLine},null,8,["source","points","coordArray","strokeLine"])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Et,[d.image?((0,n.uX)(),(0,n.CE)("div",Xt,[At,(0,n.Lk)("span",null,(0,r.v_)(d.duration)+" ms",1)])):(0,n.Q3)("",!0),d.image?((0,n.uX)(),(0,n.CE)("div",St,[Tt,(0,n.Lk)("span",null,(0,r.v_)(d.objectsCount),1)])):(0,n.Q3)("",!0),d.image?((0,n.uX)(),(0,n.Wv)(Y,{key:2,onClick:g,name:"Download",disabled:!c.value,"custom-classes":"mr-16"},null,8,["disabled"])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Wt,[d.image?((0,n.uX)(),(0,n.Wv)(Y,{key:0,onClick:h,name:"Try New Image",disabled:!c.value,"custom-classes":"mr-16"},null,8,["disabled"])):(0,n.Q3)("",!0)])])],64))}});const jt=(0,g.A)(Vt,[["__scopeId","data-v-11803265"]]);var Mt=jt;const Rt=e=>((0,n.Qi)("data-v-27fd1c02"),e=e(),(0,n.jt)(),e),Ut={class:"home-container"},Ht=Rt((()=>(0,n.Lk)("div",{class:"description"},[(0,n.Lk)("h1",null,"XÂY DỰNG ỨNG DỤNG WEB DỰA TRÊN"),(0,n.Lk)("h2",null,"MÔ HÌNH CNN STARDIST,"),(0,n.Lk)("h3",null,"THUẬT TOÁN HOG, WATERSHED"),(0,n.Lk)("p",null,"ĐỂ PHÂN ĐOẠN ĐỐI TƯỢNG")],-1))),Kt=[Ht];function Qt(e,t,a,l,o,i){return(0,n.uX)(),(0,n.CE)("div",Ut,Kt)}var zt={name:"HomePage"};const Dt=(0,g.A)(zt,[["render",Qt],["__scopeId","data-v-27fd1c02"]]);var Nt=Dt;const Bt={class:"h-screen overflow-y-auto bg-gray-100 p-4"},Gt={class:"flex items-center p-4"},$t={class:"flex flex-col"},Yt={class:"h-10"},qt=(0,n.Lk)("span",{class:"text-white mr-4"},"Objects Counted:",-1),Jt={class:"text-lime-400"},Zt={class:"flex"},ea={class:"mx-1 flex-1"},ta={class:"mx-1 flex-1"},aa={class:"mx-1 flex-1"};var la={__name:"HogPage",setup(e){const t=(0,L.Kh)({imageOriginView:null,imageOrigin:null,hogImage:null,segmentedImage:null,objectsCount:0}),a=async e=>{const a=e.target.files[0];if(a){if(a.name.toLowerCase().includes("tiff")||a.name.toLowerCase().includes("tif")){const e=new FormData;e.append("tiff_file",a);try{const a=await q.A.post("http://localhost:5000/api/v1.0/convert",e,{headers:{"Content-Type":"multipart/form-data"},responseType:"arraybuffer"}),l=new Blob([a.data],{type:"image/png"});t.imageOriginView=URL.createObjectURL(l)}catch(l){alert("Error uploading and converting the image, please try again"),console.error("Error uploading and converting the image",l)}}else{const e=new FileReader;e.onload=e=>{t.imageOriginView=e.target.result},e.readAsDataURL(a)}t.imageOrigin=a,t.histogram=null,t.segmentedImage=null,t.hogImage=null}},l=async()=>{const e="http://localhost:5000/api/v1.0/hog";if(!t.imageOrigin)return void alert("You need to choose the image first");const a=new FormData;a.append("image",t.imageOrigin);try{const l=await q.A.post(e,a,{});t.hogImage="http://localhost:5000"+l.data.hog_image_url,t.segmentedImage="http://localhost:5000"+l.data.segmented_image_url,t.objectsCount=l.data.total_bounding_boxes}catch(l){console.error(l),alert(l.response.data.message)}};return(e,o)=>((0,n.uX)(),(0,n.CE)("div",Bt,[(0,n.bF)(X,{title:"Histogram of Oriented Gradients Page"}),(0,n.Lk)("div",Gt,[(0,n.Lk)("input",{type:"file",onChange:a,accept:"image/*"},null,32),(0,n.bF)(Y,{onClick:o[0]||(o[0]=e=>l()),name:"Apply HOG","custom-classes":"py-4"})]),(0,n.Lk)("div",$t,[(0,n.Lk)("div",Yt,[qt,(0,n.Lk)("span",Jt,(0,r.v_)(t.objectsCount),1)]),(0,n.Lk)("div",Zt,[(0,n.Lk)("div",ea,[t.imageOriginView?((0,n.uX)(),(0,n.Wv)(Ce,{key:0,title:"Original Image",source:t.imageOriginView,alt:"Uploaded Image"},null,8,["source"])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",ta,[t.hogImage?((0,n.uX)(),(0,n.Wv)(Ce,{key:0,title:"Hog Image",source:t.hogImage,alt:"Uploaded Image"},null,8,["source"])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",aa,[t.segmentedImage?((0,n.uX)(),(0,n.Wv)(Ce,{key:0,title:"Segmented Image",source:t.segmentedImage,alt:"Uploaded Image"},null,8,["source"])):(0,n.Q3)("",!0)])])])]))}};const na=la;var oa=na;const ia={class:"h-screen overflow-y-auto bg-gray-100 p-4"},sa={class:"flex items-center p-4"},ra={class:"flex flex-col"},ca={class:"h-10"},da=(0,n.Lk)("span",{class:"text-white mr-4"},"Objects Counted:",-1),ua={class:"text-lime-400"},pa={class:"flex"},ma={class:"mx-1 flex-1"},ga={class:"mx-1 flex-1"};var ha={__name:"WatershedPage",setup(e){const t=(0,L.Kh)({imageOriginView:null,imageOrigin:null,segmentedImage:null,objectsCount:0}),a=async e=>{const a=e.target.files[0];if(a){if(a.name.toLowerCase().includes("tiff")||a.name.toLowerCase().includes("tif")){const e=new FormData;e.append("tiff_file",a);try{const a=await q.A.post("http://localhost:5000/api/v1.0/convert",e,{headers:{"Content-Type":"multipart/form-data"},responseType:"arraybuffer"}),l=new Blob([a.data],{type:"image/png"});t.imageOriginView=URL.createObjectURL(l)}catch(l){alert("Error uploading and converting the image, please try again"),console.error("Error uploading and converting the image",l)}}else{const e=new FileReader;e.onload=e=>{t.imageOriginView=e.target.result},e.readAsDataURL(a)}t.imageOrigin=a,t.segmentedImage=null}},l=async()=>{const e="http://localhost:5000/api/v1.0/watershed";if(!t.imageOrigin)return void alert("You need to choose the image first");const a=new FormData;a.append("image",t.imageOrigin);try{const l=await q.A.post(e,a,{});t.segmentedImage="http://localhost:5000"+l.data.segmented_image_url,t.objectsCount=l.data.total_bounding_boxes}catch(l){console.error(l),alert(l.response.data.message)}};return(e,o)=>((0,n.uX)(),(0,n.CE)("div",ia,[(0,n.bF)(X,{title:"Watershed Segmentation Page"}),(0,n.Lk)("div",sa,[(0,n.Lk)("input",{type:"file",onChange:a,accept:"image/*"},null,32),(0,n.bF)(Y,{onClick:o[0]||(o[0]=e=>l()),name:"Apply Watershed","custom-classes":"py-4"})]),(0,n.Lk)("div",ra,[(0,n.Lk)("div",ca,[da,(0,n.Lk)("span",ua,(0,r.v_)(t.objectsCount),1)]),(0,n.Lk)("div",pa,[(0,n.Lk)("div",ma,[t.imageOriginView?((0,n.uX)(),(0,n.Wv)(Ce,{key:0,title:"Original Image",source:t.imageOriginView,alt:"Uploaded Image"},null,8,["source"])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",ga,[t.segmentedImage?((0,n.uX)(),(0,n.Wv)(Ce,{key:0,title:"Segmented Image",source:t.segmentedImage,alt:"Uploaded Image"},null,8,["source"])):(0,n.Q3)("",!0)])])])]))}};const va=ha;var ya=va;const fa=[{path:"/",name:"Home",component:Nt},{path:"/training",name:"Training",component:ue},{path:"/predict",name:"Predict",component:Mt},{path:"/hog",name:"HOG",component:oa},{path:"/watershed",name:"Watershed",component:ya}],ka=(0,b.aE)({history:(0,b.LA)("/deploy/"),routes:fa});var ba=ka;(0,l.Ef)(k).use(ba).mount("#app")}},t={};function a(l){var n=t[l];if(void 0!==n)return n.exports;var o=t[l]={exports:{}};return e[l].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,l,n,o){if(!l){var i=1/0;for(d=0;d<e.length;d++){l=e[d][0],n=e[d][1],o=e[d][2];for(var s=!0,r=0;r<l.length;r++)(!1&o||i>=o)&&Object.keys(a.O).every((function(e){return a.O[e](l[r])}))?l.splice(r--,1):(s=!1,o<i&&(i=o));if(s){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[l,n,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var n,o,i=l[0],s=l[1],r=l[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(n in s)a.o(s,n)&&(a.m[n]=s[n]);if(r)var d=r(a)}for(t&&t(l);c<i.length;c++)o=i[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(d)},l=self["webpackChunkstar_vision_ui"]=self["webpackChunkstar_vision_ui"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[504],(function(){return a(9210)}));l=a.O(l)})();
//# sourceMappingURL=app.ed4685b2.js.map